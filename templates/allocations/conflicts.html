{% extends "base.html" %}

{% block title %}Resource Conflicts - Event Scheduler{% endblock %}

{% block content %}
<div class="card">
    <h2>Resource Conflict Detection</h2>

    {% if event %}
    <p><strong>Event:</strong> {{ event.title }}</p>
    <p><strong>Time:</strong> {{ event.start_time.strftime('%Y-%m-%d %H:%M') }} - {{ event.end_time.strftime('%Y-%m-%d
        %H:%M') }}</p>
    {% endif %}

    {% if conflicts %}
    <h3>Conflicts Found:</h3>
    {% for conflict in conflicts %}
    <div class="conflict-item">
        <h4>{{ conflict.resource.resource_name }}</h4>
        <p><strong>Already allocated to:</strong> {{ conflict.event.title }}</p>
        <p><strong>Conflicting time:</strong>
            {{ conflict.event.start_time.strftime('%Y-%m-%d %H:%M') }} -
            {{ conflict.event.end_time.strftime('%Y-%m-%d %H:%M') }}</p>
    </div>
    {% endfor %}
    {% else %}
    <div class="alert alert-success">
        No conflicts detected! Resources are available for allocation.
    </div>
    {% endif %}

    <a href="{{ url_for('manage_allocations') }}" class="btn btn-secondary">Back to Allocations</a>
</div>
{% endblock %}